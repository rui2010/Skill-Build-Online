html,body{height:100%;margin:0;background:#222;color:#eee;font-family:system-ui,Segoe UI,Roboto}
canvas{display:block;width:100%;height:100%}
#overlay{position:absolute;left:10px;top:10px;z-index:10}
#hud{background:rgba(0,0,0,0.5);padding:10px;border-radius:6px}
#skills{margin-top:8px;display:flex;gap:6px;flex-wrap:wrap}
.skill-btn{background:#333;border:1px solid #555;padding:6px;border-radius:4px;color:#fff;cursor:pointer}
.skill-btn[disabled]{opacity:0.4;cursor:not-allowed}
#lock-btn{margin-top:8px;padding:6px}

/* コマンドバー */
#command-bar{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;z-index:50;width:70%;max-width:900px}
#command-bar input{width:100%;padding:10px 12px;border-radius:6px;border:1px solid #444;background:#111;color:#fff;font-size:14px}
.hidden{display:none}

/* モーダル */
.modal{position:fixed;left:0;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:60}
.modal-content{background:#1b1b1b;padding:20px;border-radius:8px;border:1px solid #333;width:320px;text-align:center}
.modal-content.cinematic{width:640px;max-width:90%;min-height:160px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px}
.job-list{display:flex;gap:8px;justify-content:center;margin-top:12px}
.job-btn{padding:8px 12px;border-radius:6px;background:#2b2b2b;border:1px solid #444;color:#fff;cursor:pointer}
.secondary{margin-top:12px;padding:6px 10px;background:#333;border:1px solid #444;color:#ddd;cursor:pointer}

/* NPC ラベル */
.npc-label{position:absolute;padding:2px 6px;background:rgba(0,0,0,0.6);border-radius:4px;font-size:12px;color:#fff;pointer-events:none}

/* 吹き出し */
.npc-speech{
	position:absolute;z-index:70;pointer-events:none;
	background:rgba(255,255,255,0.95);color:#111;padding:6px 8px;border-radius:8px;font-size:13px;
	border:1px solid #ccc;white-space:nowrap;transform-origin:left top;
	box-shadow:0 2px 6px rgba(0,0,0,0.4);
}
.npc-speech.hidden{display:none;}
.cinema-text{color:#fff;font-size:18px;line-height:1.5;min-height:72px;max-height:240px;overflow:hidden;padding:6px;background:transparent;border-radius:4px;text-align:center}

/* タイプライター用カーソル（擬似） */
.cinema-text::after{
	content:'|';
	margin-left:6px;
	opacity:0.9;
	animation: blink 1s steps(1) infinite;
}
@keyframes blink{50%{opacity:0}}

/* フェードイン/out の補助クラス */
.fade-in{animation: fadeIn 0.6s ease forwards}
.fade-out{animation: fadeOut 0.5s ease forwards}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
@keyframes fadeOut{from{opacity:1}to{opacity:0;transform:translateY(-6px)}}

/* 開場ボタン等の配置調整 */
#opening-next{padding:8px 12px}

/* キャラメイク・名前入力モーダルおよびプレビュー */
#ch-preview{
	width:120px;height:60px;margin:0 auto;border-radius:6px;border:1px solid rgba(255,255,255,0.06);
	display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.04);color:#fff;font-size:13px;
}
input[type="range"]{width:100%}
.ch-color-btn{cursor:pointer;border:2px solid transparent}
.ch-color-btn.active{outline:2px solid #fff;transform:translateY(-2px)}
